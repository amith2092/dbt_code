project_name: my_analytics
    project_dir: ./my_dbt_project
    database_url: postgresql://user:pass@localhost:5432/mydatabase
    
    project_config:
      vars:
        start_date: '2023-01-01'
      target-path: target
      clean-targets:
        - target
        - dbt_packages
    
    sources:
      - schema: raw_data
        tables:
          - customers
          - orders
    
    models:
      - name: stg_customers
        layer: staging
        sql: |
          SELECT 
            customer_id,
            first_name,
            last_name,
            email
          FROM {{ source('raw_data', 'customers') }}
        config:
          materialized: view
          tags: ['staging', 'daily']
          schema: staging
          
      - name: int_customer_orders
        layer: intermediate
        sql: |
          SELECT 
            c.customer_id,
            COUNT(o.order_id) as total_orders,
            SUM(o.amount) as total_amount
          FROM {{ ref('stg_customers') }} c
          LEFT JOIN {{ ref('stg_orders') }} o
            ON c.customer_id = o.customer_id
          GROUP BY c.customer_id
        config:
          materialized: table
          tags: ['intermediate']
          schema: intermediate
          unique_key: customer_id
